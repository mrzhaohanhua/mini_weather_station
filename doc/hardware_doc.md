# <font color=LightBlue>精能MPPT控制器</font>

## 1. 物理接口

### 1.1 接口阵脚定义

![](.\pictures\8_JN-MP.jpg)

| 针脚 | 定义 | 说明 |
| :---: | :---: | :---: |
| 1/2/3/4 | 空 | 空 |
| 5 | RS485-A | RS485-A |
| 6 | RS485-B | RS485-B |
| 7 | +12VDC | 12V/400mA |
| 8 | GND | 电源地 |

### 1.2 接口通讯方式

>接口标准: RS485

>通讯方式: 异步串行

>波特率: 9600

每帧数据10位（包括1个起始位，8个数据位，1个停止位，无奇偶校验）

所有数据均是16进制无符号数

## 2. 通讯协议

采用标准MODBUS协议

ADDR: 本机地址（范围：`01H` - `FEH`），`FFH`为广播地址，设备默认地址为`06H`

### 2.1 读取当前运行参数

使用功能码`04H`

下发信息：

| 定义 | 地址 | 功能码 | 起始寄存器地址 | 寄存器个数 | CRC校验 |
| :---: | :---: | :---: | :---: | :---: | :---: |
| 数据 | ADDR | 04H | 1000H | 001DH | CRC16 |
| 字节数 | 1 | 1 | 2 | 2 | 2 |

控制器返回信息：

| 定义 | 地址 | 功能码 | 返回数据字节数 | 返回数据 | CRC校验 |
| :---: | :---: | :---: | :---: | :---: | :---: |
| 数据 | ADDR | 04H | 3AH | DATA | CRC16 |
| 字节数 | 1 | 1 | 1 | 58 | 2 |

### 2.2 寄存器地址表

>运行参数（只读）

| 寄存器地址 | 内容 | 字节长度 | 系数（单位） |
| :---: | :---: | :---: | :---: |
| 0x1000 | 软件版本号 | 2 | 
| 0x1001 | 光伏板电压 | 2 | 0.1（V） | 
| 0x1002 | 蓄电池电压 | 2 | 0.1（V） | 
| 0x1003 | A通道电流 | 2 | 0.1（A） | 
| 0x1004 | B通道电流 | 2 | 0.1（A） | 
| 0x1005 | 充电总电流 | 2 | 0.1（A） | 
| 0x1006 | 充电器温度<br>（原当前温度） | 2 |  1℃ | 
| 0x1007 | 充电功率 | 2 | 0.1W |
| 0x1008 | 放电功率 | 2 | 0.1W |
| 0x1009 | 蓄电池容量 | 2 | % |
| 0x100A | 充电状态 | 2 | 00 未充电 <br>01 MPPT 充电 <br>02 提升充<br>03 浮充充电<br>04 均衡充电 |
| 0x100B | 负载状态 | 2 | 00 断开<br>01 带载 |
| 0x100C | 放电电流 |2 | 0.1（A） |
| 0x100D | 过放次数 |2 | 1次 |
| 0x100E | 充电总瓦时数高字 | 2 |
| 0x100F | 充电总瓦时数低字 | 2 | 0.1KW |
| 0x1010 | 放电总瓦时数高字 | 2 |
| 0x1011 | 放电总瓦时数低字 | 2 | 0.1KW |
| 0x1012 | 蓄电池温度 | 2 |  ℃ | 
| 0x1013 | 故障码 | 2 | 见故障码定义 |
| 0x1014 | 控制器电压等级 | 2 | 0：12V系统<br>1：24V系统<br>2：48V系统<br>3: 96V系统<br>4: 110V系统<br>5: 120V系统<br>6: 192V系统<br>7: 216V系统<br>8: 220V系统<br>9: 240V系统<br>10: 360V系统<br>11: 384V系统<br>12: 480V系统<br>13: 540V系统 |
| 0x1015 | PV 备采电压 | 2 | 0.1（V） |
| 0x1016 | 控制器电流等级 | 2 | 0：3A<br>1：5A<br>2：10A<br>3：15A<br>4：20A<br>5：30A<br>6：40A<br>7：50A<br>8：60A<br>9: 70A<br>10：80A<br>11：100A<br>12:120A<br>13：150A<br>14：200A<br>15：250A<br>16：300A |
| 0x1017 | 蓄电池组串数 | 2 |
| 0x1018 | 电池类型 | 2 | 0 铅酸蓄电池<br>1 胶体电池<br>2 三元锂电池<br>3 磷酸铁锂<br>4 自定义 |
| 0x1019 | 充电开关状态 | 2 | 0 关机<br>1 开机 |
| 0x101A | 风扇运行状态 | 2 | 0 停止<br>1 运行 |
| 0x101B | 蓄电池温度补偿电压点 | 2 | 1 mV |
